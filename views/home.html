{{define "content"}}
    <fieldset id="home">
        <legend>Welcome, {{.IP}}</legend>
        <span>Here you can view the latest posts and boards.</span>
        <h3>Rules</h3>
        <ol>
            <li>No illegal content.</li>
            <li>No spamming.</li>
            <li>No doxxing.</li>
            <li>No flooding.</li>
            <li>No impersonation.</li>
            <li>No off-topic posts.</li>
            <li>No advertising.</li>
        </ol>

    </fieldset>
        <br>
    <fieldset id="boards">
        <legend>Boards</legend>
        <ul>
            {{range .Boards}}
                <li><a href="/board/{{.BoardID}}">/{{.BoardID}}/</a> - {{.Description}}</li>
            {{end}}
        </ul>
    </fieldset>
    <br>
    <fieldset id="stats">
        <legend>Stats</legend>
        <p>Posts: <span class="data">{{.PostCount}}</span></p>
        <p>Users: <span class="data">{{.UserCount}}</span></p>
        <p>Total Content: <span class="data">{{.TotalSize}} MB</span></p>
    </fieldset>
    <br><br>
<fieldset id="latest">
    <legend>Latest Posts</legend>
    <ul>
        {{range .LatestPosts}}
            {{if .Subject}}
            <li>
                <span class="recent-board">/{{.BoardID}}/</span>
                <a href="/board/{{.BoardID}}/{{.ThreadID}}" >
                {{if .ImageURL}}
                <img src="/file/{{.BoardID}}/{{.ImageURL}}" alt="Image">
                {{end}}
                <span class="subject">{{.Subject}}</span>
                <p>{{.PartialContent}}</p>
                <span>{{.Timestamp}}</span></a>
            </li>
            {{else}}
            <li>
                <span class="recent-board">/{{.BoardID}}/</span>
                <a href="/board/{{.BoardID}}/{{.ThreadID}}" >
                {{if .ImageURL}}
                <img src="/file/{{.BoardID}}/{{.ImageURL}}" alt="Image" class="postfile">
                {{end}}
                <p>{{.PartialContent}}</p>
                <span>{{.Timestamp}}</span></a>
            </li>
            {{end}}
        {{end}}
    </ul>
    <script>
        document.querySelectorAll(".postfile").forEach(postfile => {
            const postsrc = postfile.src;
            if (/\.(png|jpg|jpeg|gif)$/i.test(postsrc)) {
                // Image handling logic here, if necessary
            } else if (/\.(webm|mp4)$/i.test(postsrc)) {
                postfile.outerHTML = `<video controls><source src="${postsrc}" type="video/${postsrc.split('.').pop()}"></video>`;
            } else if (/\.(mp3|wav)$/i.test(postsrc)) {
                postfile.outerHTML = `<audio controls><source src="${postsrc}" type="audio/${postsrc.split('.').pop()}"></audio>`;
            } else {
                postfile.outerHTML = `<a href="${postsrc}">Download File</a>`;
            }
        });
    </script>
</fieldset>
    <style>
            .subject {
        font-weight: bold;
        color: #AAF;
    }
        #boards {
            width: 70%;
            margin: 0 auto;
            border-top: 5px solid #024877;
            border-left: 1px solid #024877;
            border-right: 1px solid #024877;
            border-bottom: 1px solid #024877;

            background-color: #1b1b1b7a;
        }
        #boards ul {
            display: flex;
            flex-wrap: wrap;
            flex-direction: row;
            justify-content: space-around;
            list-style-type: none;
            padding: 15px;
            margin: 0;
        }
        #boards li {
            margin: 0;
            padding: 0;
        }
        #boards li::before {
            content: "[";
            margin-right: 5px;
        }
        #boards li::after {
            content: "]";
            margin-left: 5px;
        }
        #boards a {
            text-decoration: none;
            color: rgb(16, 197, 128);
        }
        #boards a:hover {
            text-decoration: underline;
        }

        #stats {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-evenly;

            width: 70%;
            margin: 0 auto;
            border-top: 5px solid #024877;
            border-left: 1px solid #024877;
            border-right: 1px solid #024877;
            border-bottom: 1px solid #024877;
            background-color: #1b1b1b7a;
        }

        #latest {
            width: 70%;
            margin: 0 auto;
            border-top: 5px solid #024877;
            border-left: 1px solid #024877;
            border-right: 1px solid #024877;
            border-bottom: 1px solid #024877;
            background-color: #1b1b1b7a;
        }
        #latest ul {
            display: flex;
            flex-wrap: wrap;
            flex-direction: row;
            justify-content: space-around;
            list-style-type: none;
            padding: 15px;
            margin: 0;
        }

        #latest li {
            margin: 0;
            padding: 0;
        }

        #latest li a {
            text-decoration: none;
            color: rgb(16, 197, 128);
            height: 300px;
            width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 1px solid #1f1f1f;
            margin: 10px;
            padding: 10px;
        }

        #latest video {
            max-width: 300px;
            max-height: 200px;
        }

        #latest img {
            max-height: 200px;
            max-width: 200px;
        }

        #latest .recent-board {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }


        #home {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-top: 5px solid #024877;
            border-left: 1px solid #024877;
            border-right: 1px solid #024877;
            border-bottom: 1px solid #024877;
            background-color: #1b1b1b7a;
            width: 70%;
            margin: 0 auto;
        }
        #home p {
            margin: 0;
            padding: 0;
        }

        .data {
            font-weight: bold;
            color: rgb(170, 228, 255);
        }

    .postfile {
        max-width: 250px;
        max-height: 250px;
    }
    </style>
{{end}}