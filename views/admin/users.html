{{define "page"}}
<div id="admin-content"></div>
    <div id="admin-user-edit">
        <h2>Edit Admin Account</h2>
        <form>
            <input type="text" name="username" placeholder="admin" value="admin">
            <input type="text" name="password" placeholder="Password" required>
            <input type="text" name="confirm_password" placeholder="Confirm Password" required>
            <a href="#" onclick="return false;">Save Changes</a>
        </form>
    </div>
</div>
<script>
    document.querySelector("#admin-user-edit form a").addEventListener("click", async () => {
        const username = document.querySelector("#admin-user-edit form input[name='username']").value;
        const password = document.querySelector("#admin-user-edit form input[name='password']").value;
        const confirmPassword = document.querySelector("#admin-user-edit form input[name='confirm_password']").value;

        if (password !== confirmPassword) {
            alert("Passwords do not match!");
            return;
        }

        const formData = new URLSearchParams();
        formData.append('username', username);
        formData.append('password', password);

        const response = await fetch("/admin/user/edit", {
            method: "POST",
            headers: {
                "Content-Type": "application/x-www-form-urlencoded"
            },
            body: formData
        });

        if (response.ok) {
            alert("Changes saved successfully");
        } else {
            const errorText = await response.text();
            alert(`Failed to save changes: ${errorText}`);
        }
    });
</script>
<style>
    #admin-user-edit {
        width: 50%;
        margin: 0 auto;
        margin-top: 1.7rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }
    #admin-user-edit button {
        margin-top: 1rem;
        background-color: #02ff6b;
        border: none;
        padding: 0.5rem 1rem;
        cursor: pointer;
    }
    #admin-user-edit button:hover {
        background-color: #00cc55;
    }
</style>
{{end}}
